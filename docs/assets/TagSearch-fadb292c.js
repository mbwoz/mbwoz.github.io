import{d as g,c as u,F as i,r as h,o as c,t as p,a as k,b as T,e as f,f as d,g as $,l as b,h as _,u as C,A}from"./index-46a4d23b.js";const S=["value"],x=g({__name:"SelectField",props:{selected:null,options:null},emits:["onChange"],setup(n){return(e,t)=>(c(),u("select",{value:n.selected,onChange:t[0]||(t[0]=s=>e.$emit("onChange",s))},[(c(!0),u(i,null,h(n.options,s=>(c(),u("option",{key:s},p(s),1))),128))],40,S))}}),L=g({__name:"SubmitButton",props:{label:null},emits:["onClick"],setup(n){return(e,t)=>(c(),u("button",{onClick:t[0]||(t[0]=s=>e.$emit("onClick"))},p(n.label),1))}}),y=g({__name:"RemovableTag",props:{tag:null},emits:["removeTag"],setup(n){return(e,t)=>(c(),u("div",null,[k(p(n.tag)+" ",1),T("button",{onClick:t[0]||(t[0]=s=>e.$emit("removeTag",n.tag))},"x")]))}}),B=g({__name:"SearchForm",props:{form:null,tags:null},emits:["addTag","removeTag"],setup(n,{emit:e}){const t=n,s=f(""),m=o=>{const a=o.target;s.value=a.value},v=()=>{const o=s.value;o!==""&&t.form.selectedTags.indexOf(o)===-1&&(s.value="",e("addTag",o))};return(o,a)=>(c(),u(i,null,[T("div",null,[d(x,{selected:s.value,options:n.tags,onOnChange:m},null,8,["selected","options"]),d(L,{label:"Add tag",onOnClick:v})]),T("div",null,[(c(!0),u(i,null,h(n.form.selectedTags,l=>(c(),$(y,{key:l,tag:l,onRemoveTag:r=>o.$emit("removeTag",r)},null,8,["tag","onRemoveTag"]))),128))])],64))}}),F=g({__name:"TagSearch",setup(n){const e=f({selectedTags:[]}),t=f([]);Promise.resolve(b()).then(a=>t.value=a);const s=_(()=>{const a=new Set;return t.value.forEach(l=>l.tags.forEach(r=>a.add(r.toLocaleLowerCase()))),Array.from(a).sort((l,r)=>l.localeCompare(r))}),m=_(()=>t.value.filter(a=>{const l=a.tags.map(r=>r.toLocaleLowerCase());return e.value.selectedTags.every(r=>l.indexOf(r)!==-1)})),v=a=>{e.value.selectedTags=[...e.value.selectedTags,a]},o=a=>{e.value.selectedTags=e.value.selectedTags.filter(l=>l!==a)};return(a,l)=>(c(),u(i,null,[d(B,{form:e.value,tags:C(s),onAddTag:v,onRemoveTag:o},null,8,["form","tags"]),d(A,{articles:C(m)},null,8,["articles"])],64))}});export{F as default};
