import{d as v,c as g,a as r,F as C,r as $,o as d,t as b,_ as p,b as h,e as m,n as x,f as A,l as F,g as y,u as S,A as R,h as k,i as q}from"./index-c5fb696a.js";import{S as L}from"./SubmitButton-464843e5.js";const B={class:"select"},w=["value"],I=v({__name:"SelectField",props:{selected:null,options:null},emits:["onChange"],setup(a){return(e,l)=>(d(),g("div",B,[r("select",{value:a.selected,onChange:l[0]||(l[0]=s=>e.$emit("onChange",s))},[(d(!0),g(C,null,$(a.options,s=>(d(),g("option",{key:s},b(s),1))),128))],40,w)]))}});const O=p(I,[["__scopeId","data-v-686dad5d"]]),E={class:"tag"},N=v({__name:"RemovableTag",props:{tag:null},emits:["removeTag"],setup(a){return(e,l)=>(d(),g("div",E,[r("p",null,b(a.tag),1),r("p",{class:"cross",onClick:l[0]||(l[0]=s=>e.$emit("removeTag",a.tag))},"âœ•")]))}});const V=p(N,[["__scopeId","data-v-b8f6c47f"]]),z={class:"form"},D={class:"tag-select"},P={class:"tag-submit"},j=v({__name:"SearchForm",props:{form:null,tags:null},emits:["addTag","removeTag"],setup(a,{emit:e}){const l=a,s=h(""),u=n=>{const i=n.target;s.value=i.value},T=()=>{const n=s.value;n!==""&&l.form.selectedTags.indexOf(n)===-1&&(s.value="",e("addTag",n))};return(n,i)=>(d(),g("div",null,[r("div",z,[r("div",D,[m(O,{selected:s.value,options:a.tags,onOnChange:u},null,8,["selected","options"])]),r("div",P,[m(L,{label:"Add tag",onOnClick:T})])]),r("div",{class:x(["tags",a.form.selectedTags.length>0?"tags-non-empty":""])},[(d(!0),g(C,null,$(a.form.selectedTags,_=>(d(),A(V,{key:_,tag:_,onRemoveTag:f=>n.$emit("removeTag",f)},null,8,["tag","onRemoveTag"]))),128))],2)]))}});const G=p(j,[["__scopeId","data-v-5f9b4345"]]),H={class:"form"},J=v({__name:"TagSearch",setup(a){const e=h({selectedTags:[]}),l=h([]);Promise.resolve(F()).then(t=>l.value=t.sort((o,c)=>o.title.localeCompare(c.title)||o.issue.localeCompare(c.issue)));const s=q(),u=k(),T=Array.isArray(u.query.selectedTags)?u.query.selectedTags:[u.query.selectedTags];e.value.selectedTags=T.filter(t=>t!=null);const n=y(()=>{const t=new Set;return l.value.forEach(o=>o.tags.forEach(c=>t.add(c.toLocaleLowerCase()))),Array.from(t).sort((o,c)=>o.localeCompare(c))}),i=y(()=>l.value.filter(t=>{const o=t.tags.map(c=>c.toLocaleLowerCase());return e.value.selectedTags.every(c=>o.indexOf(c)!==-1)})),_=t=>{e.value.selectedTags=[...e.value.selectedTags,t],s.replace({path:u.path,query:{selectedTags:[...e.value.selectedTags]}})},f=t=>{e.value.selectedTags=e.value.selectedTags.filter(o=>o!==t),s.replace({path:u.path,query:{selectedTags:[...e.value.selectedTags]}})};return(t,o)=>(d(),g("div",null,[r("div",H,[m(G,{form:e.value,tags:S(n),onAddTag:_,onRemoveTag:f},null,8,["form","tags"])]),m(R,{articles:S(i)},null,8,["articles"])]))}});const Q=p(J,[["__scopeId","data-v-eac6f4ec"]]);export{Q as default};
